"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8608],{17065:function(n,e,t){t.d(e,{Z:function(){return i}});var a=t(85893),r=t(31607),s=t(41306);function i(n){var e=n.open,t=n.title,i=n.children;return(0,a.jsx)(s.Z,{open:e,children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 p-4 transition-all bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:max-w-sm sm:w-full sm:p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto ",children:(0,a.jsx)(r.Z,{type:"ThreeDots",color:"#f2530a"})}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold leading-6 text-gray-900",children:t||"Transaction pending"}),(0,a.jsx)("div",{className:"text-center text-gray-600",children:i})]})]})})}},41306:function(n,e,t){t.d(e,{Z:function(){return o}});var a=t(85893),r=t(67294),s=t(8390),i=t(94184),d=t.n(i);function o(n){var e=n.open,t=n.children,i=n.className;return(0,a.jsx)(s.u.Root,{show:e,as:r.Fragment,children:(0,a.jsxs)("div",{className:d()("fixed z-50",i),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,a.jsx)(s.u.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:t})})]})})}},92575:function(n,e,t){t.d(e,{AV:function(){return D},B3:function(){return N},Eh:function(){return _},GA:function(){return R},Hq:function(){return Z},I4:function(){return C},Im:function(){return x},O8:function(){return F},R_:function(){return L},Rd:function(){return P},UB:function(){return k},Xq:function(){return q},ci:function(){return V},gE:function(){return j},hP:function(){return M},l0:function(){return T},o7:function(){return B},tZ:function(){return H},vP:function(){return O},x1:function(){return U}});var a=t(7297),r=t(22865);function s(){var n=(0,a.Z)(["\n  mutation CreateDashboard(\n    $id: String!\n    $chainId: Int!\n    $jwt: SignedJwtInput!\n    $email: String\n    $gasLimit: Float\n    $trustedApps: [String]\n    $trustedAddresses: [CustomAddressInput]\n    $tokens: [TokenInput]\n    $affiliate: String\n  ) {\n    createDashboard(\n      id: $id\n      chainId: $chainId\n      jwt: $jwt\n      email: $email\n      gasLimit: $gasLimit\n      trustedApps: $trustedApps\n      trustedAddresses: $trustedAddresses\n      tokens: $tokens\n      affiliate: $affiliate\n    ) {\n      id\n    }\n  }\n"]);return s=function(){return n},n}function i(){var n=(0,a.Z)(["\n  mutation CreateDashboardOnFail(\n    $id: String!\n    $chainId: Int!\n    $jwt: SignedJwtInput!\n    $email: String\n    $gasLimit: Float\n    $trustedApps: [String]\n    $trustedAddresses: [CustomAddressInput]\n    $affiliate: String\n  ) {\n    createDashboardOnFail(\n      id: $id\n      chainId: $chainId\n      jwt: $jwt\n      email: $email\n      gasLimit: $gasLimit\n      trustedApps: $trustedApps\n      trustedAddresses: $trustedAddresses\n      affiliate: $affiliate\n    ) {\n      id\n    }\n  }\n"]);return i=function(){return n},n}function d(){var n=(0,a.Z)(["\n  mutation UpdateEmail(\n    $dashboardId: String!\n    $chainId: Int!\n    $oldEmail: String!\n    $newEmail: String!\n    $signedToken: SignedTokenInput!\n  ) {\n    updateEmail(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      oldEmail: $oldEmail\n      newEmail: $newEmail\n      signedToken: $signedToken\n    )\n  }\n"]);return d=function(){return n},n}function o(){var n=(0,a.Z)(["\n  mutation UpdateGasLimit($dashboardId: String!, $chainId: Int!, $gasLimit: Float!) {\n    updateGasLimit(dashboardId: $dashboardId, chainId: $chainId, gasLimit: $gasLimit) {\n      gasLimit\n      status\n      updatedAt\n    }\n  }\n"]);return o=function(){return n},n}function u(){var n=(0,a.Z)(["\n  mutation UpdateSettings($dashboardId: String!, $chainId: Int!, $settings: SettingsInput!) {\n    updateSettings(dashboardId: $dashboardId, chainId: $chainId, settings: $settings) {\n      id\n    }\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,a.Z)(["\n  mutation setTrustedNetwork(\n    $dashboardId: String!\n    $chainId: Int!\n    $jwt: SignedJwtInput!\n    $trustedApps: [String]\n    $trustedAddresses: [CustomAddressInput]\n  ) {\n    setTrustedNetwork(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      jwt: $jwt\n      trustedApps: $trustedApps\n      trustedAddresses: $trustedAddresses\n    ) {\n      added {\n        isApp\n        name\n        customAddressInfo {\n          address\n          name\n          isAppAddress\n        }\n      }\n      removed {\n        isApp\n        name\n        customAddressInfo {\n          address\n          name\n          isAppAddress\n        }\n      }\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,a.Z)(["\n  mutation UpsertToken(\n    $address: String!\n    $chainId: Int!\n    $dashboardId: String!\n    $isApproved: Boolean\n    $ids: [String]\n    $balance: String\n    $vaultBalance: String\n    $vaultIds: [String]\n  ) {\n    upsertToken(\n      address: $address\n      chainId: $chainId\n      dashboardId: $dashboardId\n      isApproved: $isApproved\n      ids: $ids\n      balance: $balance\n      vaultBalance: $vaultBalance\n      vaultIds: $vaultIds\n    ) {\n      address\n      isApproved\n      balance\n      ids\n      vaultBalance\n      vaultIds\n    }\n  }\n"]);return l=function(){return n},n}function h(){var n=(0,a.Z)(["\n  mutation UpdateTokens($dashboardId: String!, $chainId: Int!, $tokens: [TokenInput]) {\n    updateTokens(dashboardId: $dashboardId, chainId: $chainId, tokens: $tokens) {\n      address\n      isApproved\n      balance\n      ids\n      vaultBalance\n      vaultIds\n    }\n  }\n"]);return h=function(){return n},n}function m(){var n=(0,a.Z)(["\n  mutation RemoveTokenFromDashboard($address: String!, $dashboardId: String!, $chainId: Int!) {\n    removeTokenFromDashboard(address: $address, dashboardId: $dashboardId, chainId: $chainId) {\n      address\n    }\n  }\n"]);return m=function(){return n},n}function p(){var n=(0,a.Z)(["\n  mutation CreateTransaction(\n    $dashboardId: String!\n    $chainId: Int!\n    $type: TransactionType!\n    $status: TransactionStatus\n    $payload: String\n  ) {\n    createTransaction(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      type: $type\n      status: $status\n      payload: $payload\n    ) {\n      id\n      type\n      status\n      createdAt\n      updatedAt\n      payload\n      dashboard {\n        id\n        chainId\n      }\n    }\n  }\n"]);return p=function(){return n},n}function f(){var n=(0,a.Z)(["\n  mutation UpdateTransaction($id: ID!, $status: TransactionStatus, $payload: String) {\n    updateTransaction(id: $id, status: $status, payload: $payload) {\n      id\n      type\n      status\n      createdAt\n      updatedAt\n      payload\n      dashboard {\n        id\n        chainId\n      }\n    }\n  }\n"]);return f=function(){return n},n}function g(){var n=(0,a.Z)(["\n  mutation UpsertTokenMetadata(\n    $address: String!\n    $chainId: Int!\n    $name: String!\n    $symbol: String!\n    $erc20Value: Float\n    $erc721Values: String\n    $type: TokenType!\n    $avatar: String\n    $decimals: Int\n  ) {\n    upsertTokenMetadata(\n      address: $address\n      chainId: $chainId\n      name: $name\n      symbol: $symbol\n      erc20Value: $erc20Value\n      erc721Values: $erc721Values\n      type: $type\n      avatar: $avatar\n      decimals: $decimals\n    ) {\n      address\n    }\n  }\n"]);return g=function(){return n},n}function v(){var n=(0,a.Z)(["\n  mutation SendUpdateEmailEmail(\n    $dashboardId: String!\n    $chainId: Int!\n    $dateTime: String!\n    $oldEmail: String!\n    $newEmail: String!\n  ) {\n    sendUpdateEmailEmail(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      dateTime: $dateTime\n      oldEmail: $oldEmail\n      newEmail: $newEmail\n    )\n  }\n"]);return v=function(){return n},n}function $(){var n=(0,a.Z)(["\n  mutation SendTokenProtectionEmail(\n    $dashboardId: String!\n    $chainId: Int!\n    $dateTime: String!\n    $tokenName: String!\n    $tokenAddress: String!\n  ) {\n    sendTokenProtectionEmail(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      dateTime: $dateTime\n      tokenName: $tokenName\n      tokenAddress: $tokenAddress\n    )\n  }\n"]);return $=function(){return n},n}function I(){var n=(0,a.Z)(["\n  mutation SendSetTrustedNetworkEmail(\n    $dashboardId: String!\n    $chainId: Int!\n    $dateTime: String!\n    $added: [String]\n    $removed: [String]\n  ) {\n    sendSetTrustedNetworkEmail(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      dateTime: $dateTime\n      added: $added\n      removed: $removed\n    )\n  }\n"]);return I=function(){return n},n}function b(){var n=(0,a.Z)(["\n  mutation SendTokenWithdrawalEmail(\n    $dashboardId: String!\n    $chainId: Int!\n    $dateTime: String!\n    $tokenName: String!\n    $tokenAddress: String!\n    $quantity: String\n    $tokenId: String\n    $withdrawalFee: String!\n    $withdrawalAddress: String!\n  ) {\n    sendTokenWithdrawalEmail(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      dateTime: $dateTime\n      tokenName: $tokenName\n      tokenAddress: $tokenAddress\n      quantity: $quantity\n      tokenId: $tokenId\n      withdrawalFee: $withdrawalFee\n      withdrawalAddress: $withdrawalAddress\n    )\n  }\n"]);return b=function(){return n},n}function A(){var n=(0,a.Z)(["\n  mutation SendChangeWithdrawalAddressEmail(\n    $dashboardId: String!\n    $chainId: Int!\n    $dateTime: String!\n    $oldAddress: String!\n    $newAddress: String!\n  ) {\n    sendChangeWithdrawalAddressEmail(\n      dashboardId: $dashboardId\n      chainId: $chainId\n      dateTime: $dateTime\n      oldAddress: $oldAddress\n      newAddress: $newAddress\n    )\n  }\n"]);return A=function(){return n},n}function y(){var n=(0,a.Z)(["\n  mutation UnsubscribeFromEmails($jwt: String!, $emailSettings: EmailSettingsInput!) {\n    unsubscribeFromEmails(jwt: $jwt, emailSettings: $emailSettings)\n  }\n"]);return y=function(){return n},n}function E(){var n=(0,a.Z)(["\n  mutation SubmitUserFeedback($dashboardId: String!, $chainId: Int!, $responses: String!) {\n    submitUserFeedback(dashboardId: $dashboardId, chainId: $chainId, responses: $responses) {\n      responses\n      createdAt\n    }\n  }\n"]);return E=function(){return n},n}function S(){var n=(0,a.Z)(["\n  mutation CreateRPCuser($email: String!, $address: String!, $chainId: Int!) {\n    createRPCuser(email: $email, address: $address, chainId: $chainId) {\n      email\n      address\n    }\n  }\n"]);return S=function(){return n},n}function w(){var n=(0,a.Z)(["\n  mutation UpdateRPCMode($email: String!, $address: String!, $chainId: Int!, $mode: RPC_MODE!) {\n    updateRPCMode(email: $email, address: $address, chainId: $chainId, mode: $mode) {\n      email\n      address\n      mode\n    }\n  }\n"]);return w=function(){return n},n}var T=(0,r.Ps)(s()),k=(0,r.Ps)(i()),Z=(0,r.Ps)(d());(0,r.Ps)(o());var C=(0,r.Ps)(u()),D=(0,r.Ps)(c()),x=(0,r.Ps)(l()),_=(0,r.Ps)(h()),N=(0,r.Ps)(m()),R=(0,r.Ps)(p()),P=(0,r.Ps)(f()),L=(0,r.Ps)(g()),F=(0,r.Ps)(v()),j=(0,r.Ps)($()),U=(0,r.Ps)(I()),M=(0,r.Ps)(b()),H=(0,r.Ps)(A()),B=(0,r.Ps)(y()),O=(0,r.Ps)(E()),q=(0,r.Ps)(S()),V=(0,r.Ps)(w())},70208:function(n,e,t){t.d(e,{Z:function(){return r}});var a=t(67294);function r(){var n=(0,a.useState)([]),e=n[0],t=n[1],r=(0,a.useCallback)(function(n){return t(e.concat(n))},[e]),s=(0,a.useCallback)(function(){return t(e.slice(0,-1))},[e]),i=(0,a.useCallback)(function(){return t([])},[]);return{errors:e,pushError:r,popError:s,clearErrors:i}}},52788:function(n,e,t){t.d(e,{L1:function(){return r},fc:function(){return i},pU:function(){return s}});var a=t(71688),r="0x0000000000000000000000000000000000000000",s="0x0000000000000000000000000000000000000001",i=function(n){return[[d(n),"USDC"],[o(n),"UNI"],[u(n),"USDT"],[c(n),"DYDX"],[l(n),"DAI"],[h(n),"WETH"],[m(n),"WBTC"]]},d=function(n){return n===a.HL.ETHEREUM_MAINNET?"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48":r},o=function(n){return n===a.HL.ETHEREUM_MAINNET?"0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984":r},u=function(n){return n===a.HL.ETHEREUM_MAINNET?"0xdAC17F958D2ee523a2206206994597C13D831ec7":r},c=function(n){return n===a.HL.ETHEREUM_MAINNET?"0x92D6C1e31e14520e676a687F0a93788B716BEff5":r},l=function(n){return n===a.HL.ETHEREUM_MAINNET?"0x6B175474E89094C44Da98b954EedeAC495271d0F":r},h=function(n){return n===a.HL.ETHEREUM_MAINNET?"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2":r},m=function(n){return n===a.HL.ETHEREUM_MAINNET?"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599":r}},46232:function(n,e,t){t.d(e,{G:function(){return P},_:function(){return L}});var a,r,s=t(85893),i=t(30245),d=t(37887),o=t(93901),u=t(45710),c=t(52416),l=t(67294),h=t(71688),m=t(47568),p=t(26042),f=t(69396),g=t(828),v=t(70655),$=t(50319),I=t(92575),b=function(n,e){var t,a,r,s=(0,d.a)(i.S4,{variables:{dashboardId:n,chainId:e},pollInterval:1e4}),o=s.loading,u=s.error,c=s.data,l=s.refetch,h=(0,g.Z)((0,$.D)(I.GA),1)[0],b=(0,g.Z)((0,$.D)(I.Rd),1)[0],A=(a=(0,m.Z)(function(t,a,r){var s;return(0,v.__generator)(this,function(i){switch(i.label){case 0:return[4,h({variables:{dashboardId:n,chainId:e,type:t,payload:JSON.stringify(r),status:a}})];case 1:return s=i.sent(),[4,l()];case 2:return i.sent(),[2,s]}})}),function(n,e,t){return a.apply(this,arguments)}),y=(r=(0,m.Z)(function(t,a,r){var s,i,d=arguments;return(0,v.__generator)(this,function(a){switch(a.label){case 0:return[4,b({variables:{id:t,dashboardId:n,chainId:e,status:r,payload:JSON.stringify(d.length>3&&void 0!==d[3]?d[3]:void 0)}})];case 1:return i=a.sent(),[4,l()];case 2:return a.sent(),[2,i]}})}),function(n,e,t){return r.apply(this,arguments)});return{isLoading:o,error:u,data:null!==(t=null==c?void 0:c.transactions.map(function(n){return(0,f.Z)((0,p.Z)({},n),{payload:JSON.parse(n.payload)})}))&&void 0!==t?t:[],refetch:l,create:A,update:y}},A=t(73359),y=t(2593),E=t(27989),S=t(83975),w=t(18702),T=function(n,e,t,a){var r,s,o,u,c,h,b=(0,l.useState)(!1),T=b[0],k=b[1],Z=(0,l.useState)(!1),C=Z[0],D=Z[1],x=(0,d.a)(i.kE,{variables:{dashboardId:n,chainId:e.id}}),_=x.loading,N=x.error,R=x.data,P=x.refetch,L=(0,g.Z)((0,A.t)(i.kC),1)[0],F=(0,g.Z)((0,$.D)(I.Im),1)[0],j=(0,g.Z)((0,$.D)(I.Eh),1)[0],U=(0,g.Z)((0,$.D)(I.R_),1)[0],M=(o=(0,m.Z)(function(r,s){var i,d,o,u,c,l,h,m,p,f,g,$,I,b,A,y,T,k,Z,C,D,x,_;return(0,v.__generator)(this,function(m){switch(m.label){case 0:if(t)throw Error("Dashboard is read-only, please connect to the correct wallet and chain to edit.");return[4,w.Dq.validate(r)];case 1:if(i=m.sent(),d="ERC20"===s?(0,S.O9)(i,a):(0,S.ik)(i,a),"ERC20"!==s)return[3,14];o=void 0,m.label=2;case 2:return m.trys.push([2,4,,5]),[4,d.decimals()];case 3:return o=m.sent(),[3,5];case 4:throw m.sent(),Error("Error importing token. Are you trying to import an NFT?");case 5:return m.trys.push([5,12,,13]),[4,d.name()];case 6:return u=m.sent(),[4,d.symbol()];case 7:return c=m.sent(),[4,U({variables:{address:i,chainId:e.id,name:u,symbol:c,type:E.iv.ERC20,decimals:o}})];case 8:return m.sent(),[4,d.allowance(n,e.flashbotAddress)];case 9:return l=!m.sent().isZero(),[4,d.balanceOf(n)];case 10:return h=m.sent(),[4,F({variables:{address:i,chainId:e.id,dashboardId:n,isApproved:l,balance:h.toString()}})];case 11:return m.sent(),[3,13];case 12:throw Error(m.sent());case 13:return[3,26];case 14:if("ERC721"!==s)return[3,25];m.label=15;case 15:return m.trys.push([15,23,,24]),p={address:i,chainId:e.id,name:"",symbol:"",erc20Value:0,erc721Values:{},type:E.iv.ERC721,avatar:""},[4,(0,E.nM)(n,e,[p],a,!0)];case 16:if(!(0!==(f=m.sent()).length))return[3,21];return I=f[0],[4,U({variables:{address:i,chainId:e.id,name:null!==(b=null==I?void 0:I.collectionName)&&void 0!==b?b:"",symbol:null!==(A=null==I?void 0:I.symbol)&&void 0!==A?A:"",type:null!==(y=null==I?void 0:I.type)&&void 0!==y?y:"",avatar:null!==(T=null==I?void 0:I.imageUrl)&&void 0!==T?T:""}})];case 17:return m.sent(),Z=null!==(k=null==I?void 0:null===(g=I.tokenInput)||void 0===g?void 0:g.ids)&&void 0!==k?k:[],D=null!==(C=null==I?void 0:null===($=I.tokenInput)||void 0===$?void 0:$.vaultIds)&&void 0!==C?C:[],[4,d.isApprovedForAll(n,e.flashbotAddress)];case 18:if(x=m.sent(),!(0!==Z.length))return[3,20];return[4,F({variables:{address:i,chainId:e.id,dashboardId:n,isApproved:x,ids:Z,vaultIds:D}})];case 19:m.sent(),m.label=20;case 20:return[3,22];case 21:throw Error("Error importing NFT. You do not own this collection or is not supported.");case 22:return[3,24];case 23:throw Error(m.sent().message);case 24:return[3,26];case 25:throw Error("Invalid Params.");case 26:return[4,P()];case 27:return m.sent(),[2]}})}),function(n,e){return o.apply(this,arguments)}),H=(u=(0,m.Z)(function(t,r){var s;return(0,v.__generator)(this,function(i){switch(i.label){case 0:return[4,(0,E.nM)(n,e,t,a,r)];case 1:return s=i.sent(),[4,j({variables:{dashboardId:n,chainId:e.id,tokens:s.map(function(n){return n.tokenInput})}})];case 2:return i.sent(),[2]}})}),function(n,e){return u.apply(this,arguments)}),B=(c=(0,m.Z)(function(n){return(0,v.__generator)(this,function(e){switch(e.label){case 0:return k(!0),[4,H([n],!0)];case 1:return e.sent(),[4,P()];case 2:return e.sent(),k(!1),[2]}})}),function(n){return c.apply(this,arguments)}),O=(h=(0,m.Z)(function(){var n,t,a;return(0,v.__generator)(this,function(n){switch(n.label){case 0:return D(!0),[4,L({variables:{chainId:e.id}})];case 1:return[4,H(null!==(a=null==(t=n.sent().data)?void 0:t.allTokenMetadata)&&void 0!==a?a:[])];case 2:return n.sent(),[4,P()];case 3:return n.sent(),D(!1),[2]}})}),function(){return h.apply(this,arguments)});return{isLoading:_||T||C,error:N,data:null!==(s=null==R?void 0:R.tokens.filter(function(n){return n.isApproved||!(y.O$.from(n.balance).isZero()&&y.O$.from(n.vaultBalance).isZero()&&0===n.ids.length&&0===n.vaultIds.length)}).map(function(n){return(0,f.Z)((0,p.Z)({},n),{metadata:(0,f.Z)((0,p.Z)({},n.metadata),{avatar:null!==(r=n.metadata.avatar)&&void 0!==r?r:"/images/generic.png"})})}))&&void 0!==s?s:[],refetch:P,syncOne:B,syncAll:O,importMetadata:M}},k=t(52788),Z=t(99214),C=t(66252),D=function(n,e,t,a,r){var s,d,o,u=(0,l.useState)(!0),c=u[0],h=u[1],p=(0,l.useState)(null),f=p[0],b=p[1],A=(s=i.Y$,d=(0,C.x)(),(0,l.useCallback)(function(n){return d.query({query:s,variables:n,fetchPolicy:"network-only"})},[d,s])),y=(0,l.useState)(""),E=y[0],T=y[1],D=(0,g.Z)((0,$.D)(I.tZ),1)[0],x=(0,l.useCallback)((0,m.Z)(function(){var t,r,s;return(0,v.__generator)(this,function(t){switch(t.label){case 0:b(null),h(!0),T(""),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,S.y0)(e.vaultAddress,a).viewRecipientAddress(n)];case 2:return(r=t.sent())!==k.L1&&T(r),h(!1),b(null),[3,4];case 3:return b(t.sent()),[3,4];case 4:return[2]}})}),[e,a,n]);(0,l.useEffect)(function(){x()},[x]);var _,N=(o=(0,m.Z)(function(a){var s,i,d,o,u;return(0,v.__generator)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,5,,6]),t)throw Error("Dashboard is read-only, please connect to the correct wallet and chain to edit.");return[4,w.Dq.validate(a)];case 1:return s=i.sent(),[4,(0,S.y0)(e.vaultAddress,r).setupRecipientAddress(s)];case 2:return[4,i.sent().wait()];case 3:return o=i.sent(),[4,x()];case 4:return i.sent(),D({variables:{dashboardId:n,chainId:e.id,dateTime:new Date().toDateString(),oldAddress:"",newAddress:a}}),[2,o];case 5:throw b(u=i.sent()),u;case 6:return[2]}})}),function(n){return o.apply(this,arguments)}),R=(_=(0,m.Z)(function(a,s){var i,d,o,u,c,l,h;return(0,v.__generator)(this,function(d){switch(d.label){case 0:if(d.trys.push([0,6,,7]),t)throw Error("Dashboard is read-only, please connect to the correct wallet and chain to edit.");return i={message:Z.y8,userAddress:n,currentRecipientAddress:a,desiredRecipientAddress:s},[4,r._signTypedData((0,Z.ge)(e.id),Z.Tu,i)];case 1:return[4,A({dashboardId:n,currentRecipientAddress:a,desiredRecipientAddress:s,signature:d.sent(),chainId:e.id})];case 2:return o=d.sent(),[4,(0,S.y0)(e.vaultAddress,r).changeRecipientAddress(o.data.changeRecipientSignature.signature,s,o.data.changeRecipientSignature.exp)];case 3:return[4,d.sent().wait()];case 4:return l=d.sent(),[4,x()];case 5:return d.sent(),D({variables:{dashboardId:n,chainId:e.id,dateTime:new Date().toDateString(),oldAddress:a,newAddress:s}}),[2,l];case 6:throw h=d.sent(),console.log(h),b(h),h;case 7:return[2]}})}),function(n,e){return _.apply(this,arguments)});return{isLoading:c,error:f,data:E,refetch:x,register:N,change:R}},x=t(70208);(0,m.Z)(function(n,e,t,a,r,s){var i,d,o,u;return(0,v.__generator)(this,function(d){switch(d.label){case 0:return o={message:e,trustedApps:t,trustedAddresses:a,signedAt:i=n.iat,verificationString:n.signature},[4,s._signTypedData((0,Z.ge)(r),Z.l_,o)];case 1:return[2,d.sent()]}})});var _=(r=(0,m.Z)(function(n,e,t,a,r,s){var i,d,o,u;return(0,v.__generator)(this,function(u){switch(u.label){case 0:return i=n.iat,d=n.signature,console.log(e,t,a,i,d),o={message:e,oldEmail:t,newEmail:a,signedAt:i,verificationString:d},[4,s._signTypedData((0,Z.ge)(r),Z.BW,o)];case 1:return[2,u.sent()]}})}),function(n,e,t,a,s,i){return r.apply(this,arguments)}),N=function(n,e,t,a,r){var s,d=(0,g.Z)((0,A.t)(i.D7),1)[0],o=(0,g.Z)((0,$.D)(I.Hq),1)[0],u=(0,g.Z)((0,$.D)(I.O8),1)[0];return s=(0,m.Z)(function(s){var i,c,l,h,m,p,f;return(0,v.__generator)(this,function(m){switch(m.label){case 0:if(!s)throw Error("No email provided!");if(s===(h=null!=t?t:""))return[2];return[4,d({variables:{subject:n},fetchPolicy:"network-only"})];case 1:return[4,_(null==(p=m.sent().data)?void 0:p.signedToken,Z.RT,h,s,e,a)];case 2:return f=m.sent(),[4,o({variables:{dashboardId:n,chainId:e,oldEmail:h,newEmail:s,signedToken:{sub:n,exp:null==p?void 0:null===(i=p.signedToken)||void 0===i?void 0:i.exp,iat:null==p?void 0:null===(c=p.signedToken)||void 0===c?void 0:c.iat,signature:f}},context:{headers:{authorization:"Bearer ".concat(null==p?void 0:null===(l=p.signedToken)||void 0===l?void 0:l.signature)}}})];case 3:return m.sent(),u({variables:{dashboardId:n,chainId:e,dateTime:new Date().toDateString(),oldEmail:h,newEmail:s}}),[4,r()];case 4:return m.sent(),[2]}})}),function(n){return s.apply(this,arguments)}},R=function(n,e,t){var a,r=(0,g.Z)((0,$.D)(I.I4),1)[0];return a=(0,m.Z)(function(a){return(0,v.__generator)(this,function(s){switch(s.label){case 0:return[4,r({variables:{dashboardId:n,chainId:e,settings:a}})];case 1:return s.sent(),[4,t()];case 2:return s.sent(),[2]}})}),function(n){return a.apply(this,arguments)}},P=(0,l.createContext)({chain:null,provider:null,dashboardId:"",isChainConnected:!0,isReadOnly:!0,email:"",updateEmail:null,gasLimit:null,status:"",settings:null,updateSettings:null,trustedApps:[],trustedAddresses:[],createdAt:"",updatedAt:"",isLoading:!0,errors:[],pushError:null,popError:null,refetch:null,tokens:{isLoading:!0,error:null,data:[],refetch:null,syncOne:null,syncAll:null,importMetadata:null},transactions:{isLoading:!0,error:null,data:[],refetch:null,create:null,update:null},withdrawalAddress:{isLoading:!0,error:null,data:"",refetch:null,register:null,change:null}}),L=function(n){var e,t,a,r,m,p,f,g,v,$,I,A,y,E,S,w,k,Z,C=n.dashboardId,_=n.chainId,L=n.children,F=(0,c.Z)(),j=F.address,U=F.signer,M=F.chain,H=(0,l.useMemo)(function(){return(0,h.zK)(_)},[_]),B=(0,l.useMemo)(function(){return H?new o.c(H.rpcUrl,u.H(H.id)):null},[H]),O=_===(null==M?void 0:M.id),q=j!==C||!O,V=(0,x.Z)(),W=V.errors,J=V.pushError,Y=V.popError,G=(0,d.a)(i.KK,{variables:{dashboardId:C,chainId:H.id}}),z=N(C,H.id,null===(e=G.data)||void 0===e?void 0:null===(t=e.dashboard)||void 0===t?void 0:t.email,U,G.refetch),K=R(C,H.id,G.refetch),X=T(C,H,q,B),Q=b(C,H.id),nn=D(C,H,q,B,U);return(0,s.jsx)(P.Provider,{value:{chain:H,provider:B,dashboardId:C,isChainConnected:O,isReadOnly:q,email:null===(a=G.data)||void 0===a?void 0:null===(r=a.dashboard)||void 0===r?void 0:r.email,updateEmail:z,settings:null===(m=G.data)||void 0===m?void 0:null===(p=m.dashboard)||void 0===p?void 0:p.settings,updateSettings:K,gasLimit:null===(f=G.data)||void 0===f?void 0:null===(g=f.dashboard)||void 0===g?void 0:g.gasLimit,status:null===(v=G.data)||void 0===v?void 0:null===($=v.dashboard)||void 0===$?void 0:$.status,trustedApps:null===(I=G.data)||void 0===I?void 0:null===(A=I.dashboard)||void 0===A?void 0:A.trustedApps,trustedAddresses:null===(y=G.data)||void 0===y?void 0:null===(E=y.dashboard)||void 0===E?void 0:E.trustedAddresses,createdAt:null===(S=G.data)||void 0===S?void 0:null===(w=S.dashboard)||void 0===w?void 0:w.createdAt,updatedAt:null===(k=G.data)||void 0===k?void 0:null===(Z=k.dashboard)||void 0===Z?void 0:Z.updatedAt,isLoading:G.loading,errors:W,pushError:J,popError:Y,refetch:G.refetch,tokens:X,transactions:Q,withdrawalAddress:nn},children:L})}},99214:function(n,e,t){t.d(e,{BW:function(){return i},Ov:function(){return d},RT:function(){return u},Tu:function(){return s},ge:function(){return a},l_:function(){return r},y8:function(){return o}});var a=function(n){return{name:"Harpie Login",version:"1",chainId:n}},r={AuthToken:[{name:"message",type:"string"},{name:"trustedApps",type:"string[]"},{name:"trustedAddresses",type:"CustomAddress[]"},{name:"signedAt",type:"string"},{name:"verificationString",type:"string"},],CustomAddress:[{name:"address",type:"address"},{name:"name",type:"string"},]},s={ChangeRecipientToken:[{name:"message",type:"string"},{name:"userAddress",type:"address"},{name:"currentRecipientAddress",type:"address"},{name:"desiredRecipientAddress",type:"address"},]},i={UpdateEmailToken:[{name:"message",type:"string"},{name:"oldEmail",type:"string"},{name:"newEmail",type:"string"},{name:"signedAt",type:"string"},{name:"verificationString",type:"string"},]},d="Welcome to Harpie!\nClick to sign in and update your trusted network.\n\nThis signature will not trigger a blockchain transaction or cost any gas fees. Your session will be valid for 5 minutes.",o="You are requesting to change your recipient address.\n\nThis signature is an additional form of security. After signing, you'll be able to switch your recipient address on our smart contract.\n\nThis signature will not trigger a blockchain transaction or cost any gas fees.",u="Click to sign in and update your email.\n\nThis signature will not trigger a blockchain transaction or cost any gas fees. Your session will be valid for 5 minutes."}}]);